<html>
  <head>
    <title>Service Worker Image Helper Demo</title>
  </head>
  <body>
    <img src="owl.2x.jpg" width="64">
    <img src="social.2x.png" width="64">
    <script>
      if (window.indexedDB) {
        var dbOpenRequest = window.indexedDB.open('image-helper', 1);
        dbOpenRequest.onupgradeneeded = () => {
          dbOpenRequest.result.createObjectStore('info', {keyPath: 'id'});
        }
        dbOpenRequest.onsuccess = () => {
          if (window.devicePixelRatio) {
            var transaction =
                dbOpenRequest.result.transaction(['info'], 'readwrite');
            var objectStore = transaction.objectStore('info');
            objectStore.put({id: 'dpr', value: window.devicePixelRatio});
          }
        }
      }

      // Register our service worker.
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js');
      }
    </script>
  </body>
</html>
